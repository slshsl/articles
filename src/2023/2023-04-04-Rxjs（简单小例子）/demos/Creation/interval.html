<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script src="./rxjs.js"></script>
		<script>
			const { interval, Observable, take, tap } = rxjs;

			// interval(1000).subscribe({
			// 	next: (value) => console.log('Interval:', value)
			// });

			// // 自己实现的interval
			// const myInterval = function (period) {
			// 	return new Observable((subscriber) => {
			// 		let count = 0;
			// 		let timeInterId;

			// 		timeInterId = setInterval(() => {
			// 			subscriber.next(count++);
			// 		}, period);

			// 		return () => {
			// 			clearInterval(timeInterId);
			// 		};
			// 	});
			// };

			// const myIntervalSubscription = myInterval(1000).subscribe({
			// 	next: (value) => console.log('MyInterval:', value)
			// });

			// setTimeout(() => {
			// 	myIntervalSubscription.unsubscribe();
			// }, 5000);

			const intervalCount = interval(1000);
			const takeFive = intervalCount
				.pipe(tap(console.log))
				.pipe(() => interval(1000).take(5));
			takeFive.subscribe((x) => console.log(x));
		</script>
	</body>
</html>
